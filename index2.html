<!DOCTYPE html>
<!-- saved from url=(0084)https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/archives/1005 -->
<html lang="ja">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
    (function() {
      var container = document.querySelector('#_tcx-dfmfv3nlqw');
      if (!container) {
        return;
      }

      var XHR = XMLHttpRequest.prototype;
      var send = XHR.send;
      var open = XHR.open;
      XHR.open = function(method, url) {
        this.url = url;
        return open.apply(this, arguments);
      };
      XHR.send = function() {
        this.addEventListener('load', function() {
          try {
            const response = this.response;
            if (response && response.length) {
              const firstChar = response[0];
              if (firstChar === '[' || firstChar === '{') {
                const wrapper = document.createElement('div');
                wrapper.setAttribute('data-tcx-url', this.url);
                wrapper.innerText = response;
                container.appendChild(wrapper);
              }
            }
          } catch (err) {
            // No-op.
          }
        });
        return send.apply(this, arguments);
      };
    })();
  </script>
  <script async="" src="media-hud2/analytics.js"></script>
  <script type="text/javascript" async="" src="media-hud2/ga.js"></script>
  <script type="text/javascript" async="" src="media-hud2/ga.js"></script>
  <script src="media-hud2/analytics.js(1)" type="text/javascript"></script>
  <script type="text/javascript">
    window.addEventListener('DOMContentLoaded', function() {
      var v = archive_analytics.values;
      v.service = 'wb';
      v.server_name = 'wwwb-app13.us.archive.org';
      v.server_ms = 664;
      archive_analytics.send_pageview({});
    });
  </script>
  <script type="text/javascript" src="media-hud2/ait-client-rewrite.js" charset="utf-8"></script>
  <script type="text/javascript">
    WB_wombat_Init("https://web.archive.org/web/", "20171014222456", "masterpoppy.inspi.me");
  </script>
  <script type="text/javascript" src="media-hud2/wbhack.js" charset="utf-8"></script>
  <script type="text/javascript">
    __wbhack.init('https://web.archive.org/web');
  </script>
  <link rel="stylesheet" type="text/css" href="media-hud2/banner-styles.css">
  <link rel="stylesheet" type="text/css" href="media-hud2/iconochive.css">
  <!-- End Wayback Rewrite JS Include -->
  <title>Media HUD...HTMLでHUDを開発する(2/3) | Mad Scripter's Lab @ inspi</title>
  <link rel="shortcut icon" href="https://web.archive.org/web/20171014222456im_/http://masterpoppy.inspi.me/wp-content/themes/platformpro_dev/admin/images/favicon-pagelines.ico" type="image/x-icon">
  <link rel="profile" href="http://gmpg.org/xfn/11">
  <link rel="dns-prefetch" href="https://web.archive.org/web/20171014222456/http://s.w.org/">
  <link rel="alternate" type="application/rss+xml" title="Mad Scripter&#39;s Lab @ inspi » フィード" href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/feed">
  <link rel="alternate" type="application/rss+xml" title="Mad Scripter&#39;s Lab @ inspi » コメントフィード" href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/comments/feed">
  <link rel="alternate" type="application/rss+xml" title="Mad Scripter&#39;s Lab @ inspi » Media HUD…HTMLでHUDを開発する(2/3) のコメントのフィード" href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/archives/1005/feed">
  <link rel="https://api.w.org/" href="http://masterpoppy.inspi.me/wp-json/">
  <link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://masterpoppy.inspi.me/xmlrpc.php?rsd">
  <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://masterpoppy.inspi.me/wp-includes/wlwmanifest.xml">
  <link rel="prev" title="Media HUD…HTMLでHUDを開発する(1/3)" href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/archives/1003">
  <link rel="next" title="Media HUD…HTMLでHUDを開発する(3/3) lsl-markdownの紹介" href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/archives/1007">
  <link rel="shortlink" href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/?p=1005">
  <link rel="alternate" type="application/json+oembed" href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fmasterpoppy.inspi.me%2Farchives%2F1005">
  <link rel="alternate" type="text/xml+oembed" href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fmasterpoppy.inspi.me%2Farchives%2F1005&amp;format=xml">
  <link rel="canonical" href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/archives/1005">
  <meta name="description" content="このエントリーはセカンドライフ技術系 Advent Calendar 2016の参加記事です。 http://www.adventar.org/calendars/1673 前回に引き続き、HTMLでHUDを開発する手法の解説をします。 jquery使ったAjaxとLSLでロングポーリング(c...">
  <meta name="google-site-verification" content="ShocgonYlShlHZbVG44JZK4oyVab2Z7XOvzwPgugMQM">
  <meta name="msvalidate.01" content="B98A972EAC20F49C24F6D94FD28FFAA5">
  <link rel="stylesheet" type="text/css" href="media-hud2/shCore.css">
  <link rel="stylesheet" type="text/css" href="media-hud2/shThemeDefault.css">
  <style type="text/css" id="syntaxhighlighteranchor"></style>
  <link type="text/css" rel="stylesheet" href="media-hud2/f84aedcec0c43b737184236d278448e5-compressor-part.css" media="all">
  <!--[if IE 7]>
<link rel='stylesheet' id='ie7-style-css'  href='http://masterpoppy.inspi.me/wp-content/themes/platformpro/css/ie7.css?ver=1.5.3' type='text/css' media='all' />
<![endif]-->
  <link type="text/css" rel="stylesheet" href="media-hud2/327e52d74cbc62acdb040686dfea4e50-compressor-part.css" media="all">
  <link type="text/css" rel="stylesheet" href="media-hud2/42350d1b9ecea3936e43f71ff8f6b2f9-compressor-part.css" media="screen">
  <link type="text/css" rel="stylesheet" href="media-hud2/3277578f91c0afa6bdf5ae3ae9f14902-compressor-part.css" media="all">
  <link type="text/css" rel="stylesheet" href="media-hud2/3278b6ba956e917349e18b71138500cf-compressor-part.css" media="screen">
  <link type="text/css" rel="stylesheet" href="media-hud2/dfffcb3f629606f3df04d506f4da8efa-compressor-part.css" media="all">
  <link type="text/css" rel="stylesheet" href="media-hud2/c2c2bb609ee2747a26cca63dab3753d9-compressor-part.css" media="print">
  <link type="text/css" rel="stylesheet" href="media-hud2/3f9e39c0f5a50860dcc6494d02afbef0-compressor-part.css" media="screen">
  <link type="text/css" rel="stylesheet" href="media-hud2/b690fea58dcdfca0dd797caa1c69ab53-compressor-part.css" media="all">
  <!--[if lt IE 8]>
<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE8.js"></script>
<![endif]-->
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-10700788-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://web.archive.org/web/20171014222456/https://ssl/' : 'https://web.archive.org/web/20171014222456/http://www/') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script type="text/javascript" src="media-hud2/4e5bb06590f91f015feda8f99a7f6da9-compressor-part.js"></script>
  <script type="text/javascript">
    var _gaq = _gaq || [];

    _gaq.push(['_setAccount', 'UA-26362892-1']);
    _gaq.push(['_setDomainName', 'none']);
    _gaq.push(['_setAllowLinker', true]);
    _gaq.push(['_setAllowHash', false]);
    _gaq.push(['_trackPageview']);


    (function() {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://web.archive.org/web/20171014222456/https://ssl/' : 'https://web.archive.org/web/20171014222456/http://www/') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script>
    (function(i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//web.archive.org/web/20171014222456/http://www.google-analytics.com/analytics.js', 'gaplusu');


    gaplusu('create', 'UA-10700788-3', 'auto', {
      'name': 'single'
    });

    gaplusu('single.set', 'anonymizeIp', true);

    gaplusu('single.send', 'pageview');
  </script>
  <script type="text/javascript" src="media-hud2/3774a467274ee29ab85342ea34875ad3-compressor-part.js"></script>
</head>

<body class="post-template-default single single-post postid-1005 single-format-standard admin-bar no-customize-support canvas buddypress ttype-single tmain-single no-js">
  <!-- BEGIN WAYBACK TOOLBAR INSERT -->
  <script type="text/javascript" src="media-hud2/timestamp.js" charset="utf-8"></script>
  <script type="text/javascript" src="media-hud2/graph-calc.js" charset="utf-8"></script>
  <script type="text/javascript" src="media-hud2/auto-complete.js" charset="utf-8"></script>
  <script type="text/javascript" src="media-hud2/toolbar.js" charset="utf-8"></script>
  <style type="text/css">
    body {
      margin-top: 0 !important;
      padding-top: 0 !important;
      /*min-width:800px !important;*/
    }

    .wb-autocomplete-suggestions {
      text-align: left;
      cursor: default;
      border: 1px solid #ccc;
      border-top: 0;
      background: #fff;
      box-shadow: -1px 1px 3px rgba(0, 0, 0, .1);
      position: absolute;
      display: none;
      z-index: 2147483647;
      max-height: 254px;
      overflow: hidden;
      overflow-y: auto;
      box-sizing: border-box;
    }

    .wb-autocomplete-suggestion {
      position: relative;
      padding: 0 .6em;
      line-height: 23px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      font-size: 1.02em;
      color: #333;
    }

    .wb-autocomplete-suggestion b {
      font-weight: bold;
    }

    .wb-autocomplete-suggestion.selected {
      background: #f0f0f0;
    }
  </style>
  <!--
  <div id="wm-ipp-base" lang="en" style="display: block; direction: ltr;">
  -->
  </div>
  <script type="text/javascript">
    __wm.bt(600, 27, 25, 2, "web", "http://masterpoppy.inspi.me/archives/1005", "2017-10-14", 1996, "/_static/", ['css/banner-styles.css', 'css/iconochive.css']);
  </script>
  <div class="wb-autocomplete-suggestions "></div>
  <!-- END WAYBACK TOOLBAR INSERT -->
  <div id="site" class="one-sidebar-left">
    <div id="page">
      <div id="page-canvas">
        <div id="header" class="container-group fix">
          <!--
          <div class="outline">
            <div id="branding" class="container fix">
              <div class="texture">
                <div class="content">
                  <div class="content-pad">
                    <div class="branding_wrap">
                      <div class="title-container"><a class="home site-title" href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/" title="Home">Mad Scripter's Lab @ inspi</a>
                        <h6 class="site-description subhead">しがないスクリプト屋さんのブログ</h6>
                      </div>
                      <div class="icons" style="bottom: 21px; right: 1px;">
                        <a target="_blank" href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/feed" class="rsslink"></a>
                        <a target="_blank" href="https://web.archive.org/web/20171014222456/https://twitter.com/#!/MasterPoppy" class="twitterlink"></a>
                        <a target="_blank" href="https://web.archive.org/web/20171014222456/http://www.youtube.com/user/MasterPoppyAmat" class="youtubelink"></a>
                      </div>
                    </div>
                    <div class="clear"></div>
                  </div>
                </div>
              </div>
            </div>
            <div id="primary-nav" class="container fix">
              <div class="texture">
                <div class="content">
                  <div class="content-pad">
                    <div id="nav_row" class="main_nav fix">
                      <ul id="menu-nav" class="main-nav sf-menu">
                        <li class="page_item page-item-6 page_item_has_children"><a href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/about">筆者について</a>
                          <ul class="children">
                            <li class="page_item page-item-75"><a href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/about/club-mk">Club MK</a></li>
                            <li class="page_item page-item-79"><a href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/about/customwork">スクリプトのオーダーについて</a></li>
                          </ul>
                        </li>
                        <li class="page_item page-item-577"><a href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/kokuban">MessageBoard For Japanese</a></li>
                        <li class="page_item page-item-131"><a href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/viewer3%e5%85%a5%e9%96%80">Viewer3入門</a></li>
                      </ul>
                      <form method="get" class="searchform" action="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/" onsubmit="this.submit();return false;">
                        <fieldset>
                          <input type="text" value="Search" name="s" class="searchfield" onfocus="if (this.value == &#39;Search&#39;) {this.value = &#39;&#39;;}" onblur="if (this.value == &#39;&#39;) {this.value = &#39;Search&#39;;}">
                          <input type="image" class="submit btn" name="submit" src="media-hud2/search-btn.png" alt="Go">
                        </fieldset>
                      </form>
                    </div>
                    <div class="clear"></div>
                  </div>
                </div>
              </div>
            </div>
            <div id="secondnav" class="container fix">
              <div class="texture">
                <div class="content">
                  <div class="content-pad">
                    <div class="clear"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        -->
        </div>
        <div id="page-main" class="container-group fix">
          <div id="dynamic-content" class="outline fix">
            <div id="maincontent" class="container fix">
              <div class="texture">
                <div class="content">
                  <div class="content-pad">
                    <div id="pagelines_content" class="one-sidebar-left fix">
                      <div id="column-wrap" class="fix">
                        <div id="column-main" class="mcolumn fix">
                          <div class="mcolumn-pad">
                            <div id="postnav" class="copy fix">
                              <div class="copy-pad">
                                <div class="post-nav fix">
                                  <span class="previous"><a href="index.html" rel="prev">Media HUD…HTMLでHUDを開発する(1/3)</a></span>
                                  <span class="next"><a href="index3.html" rel="next">Media HUD…HTMLでHUDを開発する(3/3) lsl-markdownの紹介</a></span>
                                </div>
                                <div class="clear"></div>
                              </div>
                            </div>
                            <div id="theloop" class="copy fix">
                              <div class="copy-pad">
                                <div class="fpost post-1005 post type-post status-publish format-standard hentry category-lsl category-sl" id="post-1005">
                                  <div class="post-meta fix">
                                    <div class="post-header fix post-nothumb" style="">
                                      <div class="post-title-section fix">
                                        <div class="post-title fix">
                                          <h1 class="entry-title">Media HUD…HTMLでHUDを開発する(2/3)</h1>
                                          <div class="metabar"><em><span class="sword">By</span>
                                              <span class="author vcard"><span class="fn"><a href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/archives/author/masterpoppy_amat" title="MasterPoppy の投稿"
                                                    rel="author">MasterPoppy</a></span></span>
                                              <span class="sword">On</span>
                                              <span class="date time published" title="2016-12-22T00:55:07+0000">2016-12-22</span> · <span class="post-comments"><a
                                                  href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/archives/1005#respond">Leave a Comment</a></span>
                                            </em></div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="entry_wrap fix">
                                    <div class="entry_content">
                                      <p><img class="alignnone size-medium wp-image-1085 aligncenter" src="media-hud2/html_css_javascript_and_the_awesome_jquery_infographic_header-512x353.png" alt="html_css_javascript_and_the_awesome_jquery_infographic_header" width="512" height="353" srcset="media-hud2/html_css_javascript_and_the_awesome_jquery_infographic_header-512x353.png 512w, media-hud2/html_css_javascript_and_the_awesome_jquery_infographic_header-768x529.png 768w, media-hud2/html_css_javascript_and_the_awesome_jquery_infographic_header.png 772w" sizes="(max-width: 512px) 100vw, 512px"></p>
                                      <p>このエントリーはセカンドライフ技術系 Advent Calendar 2016の参加記事です。<br>
                                        <a href="http://www.adventar.org/calendars/1673" target="_blank">http://www.adventar.org/calendars/1673</a></p>
                                      <p>前回に引き続き、HTMLでHUDを開発する手法の解説をします。<br> jquery使ったAjaxとLSLでロングポーリング(comet)を実装する方法とGUIフレームワークに主眼をおいたより実用的な作例を紹介します。</p>
                                      <h2>LSLでチャットアプリを作る</h2>
                                      <p>お題としてチャットアプリ風のHUDを作ることにします。 チャットアプリとしての機能を満たすには、クライアントからHTTPリクエストを送信し、サーバーからのレスポンスにチャットログのデータをのせて送り返し、受け取ったデータをクライアントアプリが画面に書き込むように実装します。 チャットサーバとして、簡単のためにSLのローカルチャットを使うことにします。
                                        さらに、サーバーに書き込まれた発言をすべてクライアントに拾い上げる必要がありますが、それをLSLとjavascriptで実装する方法について様々な方法があるので紹介しようと思います。 サンプルコードでは簡単のためにSLのローカルチャットListenで拾うことでチャットサーバとして使うことにします。<span id="more-1005"></span></p>
                                      <h3>古典的なポーリング方法での実装</h3>
                                      <p>Webブラウザで動作するチャットアプリが登場したときから用いられていシンプルな方法で、タイマーをつかって一定時間ごとにページをリロードし、毎回すべてのチャットログをサーバーから取得します。 この方法でチャットクライアントを実装する場合は&lt;frame&gt;や&lt;iframe&gt;で分割した領域内にチャットログを表示した部分のみをページリロードするデザインが多く見られます。<br>
                                        設定した更新インターバルでページをリロードし続けるため、リロードのたびにページが白くなって待機状態になる・毎回１つのリクエストに過去分も含めてすべてのデータが含まれていて無駄がおおい・更新インターバルを上げるとサーバー負荷が増大する、などデメリットがおおいため最近では実用的なアプリにはほぼ使われなくなりました。</p>
                                      <p>
                                        <a href="media-hud2/pauling-method1.PNG" target="_blank">
                                          <img class="wp-image-1162 size-medium alignnone" src="media-hud2/pauling-method1.PNG" alt="pauling-method1 512" height="384" srcset="media-hud2/pauling-method1.PNG 512w, media-hud2/pauling-method1.PNG 768w, media-hud2/pauling-method1.PNG 960w" sizes="(max-width: 512px) 100vw, 512px">
                                        </a>
                                      </p>
                                      <h3>Ajaxによるポーリング方法での実装</h3>
                                      <p>
                                        Ajaxを用いて非同期通信とダイナミックHTMLによるDOM操作でページ遷移せずに画面の要素を部分的に追加したり書き換えする方式で、フロントエンド部分は非常に使いやすくなります。ただしバックグラウンドでは一定時間おきにリクエストを送信するので、1回当たりに取得するデータを更新分だけに絞るように実装するなど比較的減らすことはできるものの、サーバーへのアクセス回数およびそれによるサーバーへの負荷という意味では古典的なポーリング方法と大きな差はありません。
                                      </p>
                                      <p><a href="media-hud2/pauling-method2-1.PNG"><img class="alignnone wp-image-1286 size-medium" src="media-hud2/pauling-method2-1.PNG" width="512" height="384" srcset="media-hud2/pauling-method2-1.PNG 512w, media-hud2/pauling-method2-1.PNG 768w, media-hud2/pauling-method2-1.PNG 960w" sizes="(max-width: 512px) 100vw, 512px"></a></p>
                                      <h3>Cometでの実装</h3>
                                      <p>上述のAjaxによるポーリング方法に対してさらに、サーバーとの送受信のタイミングを最適化して必要最小限のリクエスト回数になるように設計された方法です。 サーバーがクライアントからリクエストを受け取ったら、すぐにレスポンスをするのではなくそのIDを保持して待機し、データの更新があったら即座にクライアントに送ります。
                                        こうすることで通信回数を必要最小限におさえて、かつサーバーのチャットログが更新されてすぐに画面を更新するので、アプリケーションとして非常に高い応答性を得られます。 この方法はCometと呼ばれ、Ajaxによる非同期通信とロングポーリングを組み合わせて実現する疑似Pushの１つです。 実質的にHTTP Pushが使えないLSLで実装できる疑似Pushのなかでは最も効率の良い方法だと考えられます。
                                        厳密な意味でのCometではデータが更新されるまでレスポンスを保留しますが、LSLの場合HTTPリクエストのIDが25秒間でタイムアウトする仕様となっていますので、データの更新がなかった場合は25秒ごとに再リクエストを送るという実装になります。 この再リクエストの処理はタイマーを使わなくてもリクエストのFailを検知して再帰処理することで継続的に動作ことができます。
                                        このCometの方式でチャットアプリのスクリプトを作成します。</p>
                                      <h2><a href="media-hud2/pauling-method3-1.PNG"><img class="alignnone wp-image-1287 size-medium" src="media-hud2/pauling-method3-1.PNG" width="512" height="384" srcset="media-hud2/pauling-method3-1.PNG 512w, media-hud2/pauling-method3-1.PNG 768w, media-hud2/pauling-method3-1.PNG 960w" sizes="(max-width: 512px) 100vw, 512px"><br>
                                        </a></h2>
                                      <h2>Comet方式のチャットアプリスクリプトの基本形</h2>
                                      <p>jqueryのajax()と、LSLのhttp_requestを使ったCometの実装サンプルです。 http_requestで受け取ったquery_idをグローバル変数に保持してlistenでllHTTPResponseを返すために再利用するだけなので、説明がおおげさなわりにはLSL側の実装は大したことはありません。</p>
                                      <script src="https://gist.github.com/masterpoppy/f6a8c62932cec497d6af0d4d4c619f8e.js"></script>
                                      <p>実行すると以下のような表示になります。 (クリックで元サイズのGIFアニメを表示します)<br> チャットで発言した内容がすぐにHUDにも反映されているのがわかるかとおもいます。<br> ぜひご自分でもスクリプトをコピーして実験してみてください。<br> ※BOXで0.85メートル角のHUDを作成して、このままスクリプトエディターに貼り付けてください。</p>
                                      <p><a href="media-hud2/Basic-Comet.gif" target="_blank"><img class="alignnone wp-image-1194 size-medium" src="media-hud2/Basic-Comet.gif" alt="basic-comet" width="512" height="449" srcset="media-hud2/Basic-Comet.gif 512w, media-hud2/Basic-Comet.gif 768w, media-hud2/Basic-Comet.gif 1024w" sizes="(max-width: 512px) 100vw, 512px"><br>
                                        </a></p>
                                      <p style="text-align: center;">実行結果(クリックでGIFアニメを表示します)</p>
                                      <p>&nbsp;</p>
                                      <h2>せっかくなので見た目をアプリっぽくする</h2>
                                      <p>ネイティブなHTMLだけで作っているとどうしても見栄えがダサくなってしまうし、かっこよくしたくても自前でCSSを書いているとLSLの容量では足りなくなります。 そこでフレームワークをつかってお手軽におしゃれアプリにしてみます。 GUIフレームワークを使うと少ない行数でクールなアプリが作れます。 最近のフレームワークだとレスポンシブルデザインやモバイル環境に対応して</p>
                                      <p>今回はGUIフレームワークとしてsemantic-uiを使います。<br>
                                        <a href="http://semantic-ui.com/" target="_blank">http://semantic-ui.com/</a></p>
                                      <p>リファレンスのページはここです。<br>
                                        <a href="http://semantic-ui.com/introduction/getting-started.html" target="_blank">http://semantic-ui.com/introduction/getting-started.html</a></p>
                                      <p>HUDとしての用途を考えると、モバイル用のフレームワークも有効だとおもいます。 jquery ui, jquery ui mobile, webix, Material UIなど簡単にインタラクティブなUIをつくれる類似のフレームワークがたくさんあるのでお気に入りを探してみてください。</p>
                                      <p>お好みでログアウトなど各機能を設定するためのボタンを配置したら <span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">‘</span>#id<span class="pl-pds">‘</span></span>).<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">‘</span>click<span class="pl-pds">‘</span></span>, <span class="pl-k">function</span>() {}のなかで<span class="pl-smi">$</span>.<span class="pl-en">ajax</span>({})をつかってhttp-inに押下したボタンの情報を送信し、LSL側で受け取ってdetachなどの処理を発火することもできます。</p>
                                      <ul>
                                        <li>
                                          <h3>HTML部分のコード</h3>
                                          <p>コードがながいため一旦HTML部分だけを抜き出して記載します。</p>
                                        </li>
                                      </ul>
                                      <script src="https://gist.github.com/masterpoppy/6f876f272b22f5bbf3e5b7c987152fed.js"></script>
                                      <ul>
                                        <li>
                                          <h3>LSLのコード</h3>
                                          <p><a href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/archives/1003">前回のエントリー</a> で紹介したようにメモリ節約のために、html部分のインデントとコメントは削除して埋め込んでいます。<br> (内容はうえのHTMLコードとおなじです)<br>
                                            BOXで0.050×0.850×0.850メートル角または0.050×0.850×0.425メートル角のHUDを作成して、このままスクリプトエディターに貼り付けてください。</p>
                                        </li>
                                      </ul>
                                      <script src="https://gist.github.com/masterpoppy/88612afd78add9853e95fc94070a50ea.js"></script>
                                      <p>実行結果はこのようになります。 使用感はさきほどとほぼおなじです。 右上のLOGOUTをクリックするとdetachされます。<br> アプリ内のインプット枠でも、SLのチャットコマンドで「/100 発言内容」でもどちらでも発言することができます。(初期値)<br> チャンネルを0にすればローカルチャットを拾います。このHUDをつけていると同一SIM内のどこにいても会話することができます。</p>
                                      <p><a href="media-hud2/WS_0657.png"><img class="alignnone size-full wp-image-1205" src="media-hud2/WS_0657.png" alt="ws_0657" width="851"
                                            height="429" srcset="media-hud2/WS_0657.png 851w, media-hud2/WS_0657-512x258.png 512w, media-hud2/WS_0657-768x387.png 768w" sizes="(max-width: 851px) 100vw, 851px"></a></p>
                                      <hr>
                                      <p>LSLでは奇跡的にhttp_requestで受けたidを保持しておいて好きなタイミングのeventで使うだけという簡単な方法でなんちゃってcometを実装できます。 今回紹介したのはチャットアプリなのでResponseするタイミングはlistenイベントでしたが、touchやsensorなどほかのイベントでももちろん同様につかうことができます。<br>
                                        最大25秒おきにずっとリクエストし続けることにはなりますが、LSL側からCEFに任意のタイミングでトリガーを送れることになります。<br> Media HUDでは重要なテクニックになると思いますので、しくみをよく理解して活用してみてください。</p>
                                      <p>関連記事へのリンク</p>
                                      <p style="padding-left: 30px;">3日め: Media HUD…HTMLでHUDを開発する(3/3)<br>
                                        <a href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/archives/1007">http://masterpoppy.inspi.me/archives/1007</a><br> 1日め: Media HUD…HTMLでHUDを開発する(1/3)<br>
                                        <a href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/archives/1003">http://masterpoppy.inspi.me/archives/1003</a></p>
                                      <div class="clear"></div>
                                    </div>
                                    <div class="tags"> &nbsp; </div>
                                  </div>
                                </div>
                                <div class="clear"></div>
                              </div>
                            </div>
                            <div id="pl_comments" class="copy fix">
                              <div class="copy-pad">
                                <div id="comments">
                                  <div id="respond" class="comment-respond">
                                    <h3 id="reply-title" class="comment-reply-title">コメントを残す <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/archives/1005#respond"
                                          style="display:none;">コメントをキャンセル</a></small></h3>
                                    <form action="https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/wp-comments-post.php" method="post" id="commentform" class="comment-form">
                                      <p class="comment-notes"><span id="email-notes">メールアドレスが公開されることはありません。</span>
                                        <span class="required">*</span> が付いている欄は必須項目です</p>
                                      <p class="comment-form-comment"><label for="comment">コメント</label>
                                        <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p>
                                      <p class="comment-form-author"><label for="author">名前 <span class="required">*</span></label>
                                        <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required="true" required="required"></p>
                                      <p class="comment-form-email"><label for="email">メールアドレス <span class="required">*</span></label>
                                        <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required="true" required="required"></p>
                                      <p class="comment-form-url"><label for="url">ウェブサイト</label>
                                        <input id="url" name="url" type="text" value="" size="30" maxlength="200"></p>
                                      <p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="コメントを送信">
                                        <input type="hidden" name="comment_post_ID" value="1005" id="comment_post_ID">
                                        <input type="hidden" name="comment_parent" id="comment_parent" value="0">
                                      </p>
                                      <p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="26"></p>
                                    </form>
                                  </div>
                                </div>
                                <div class="clear"></div>
                              </div>
                            </div>
                            <div id="pagination" class="copy fix">
                              <div class="copy-pad">
                                <div class="clear"></div>
                              </div>
                            </div>
                            <div id="sharebar" class="copy fix">
                              <div class="copy-pad">
                                <div class="post-footer">
                                  <div class="left"> If you enjoyed this article, please consider sharing it! </div>
                                  <div class="right">
                                    <a href="http://reddit.com/submit?phase=2&amp;url=http://masterpoppy.inspi.me/archives/1005&amp;title=LSL-Web+App%26%238230%3BHTML%E3%81%A7HUD%E3%82%92%E9%96%8B%E7%99%BA%E3%81%99%E3%82%8B%282%2F3%29"
                                      title="Share on Reddit" rel="nofollow" target="_blank"><img src="media-hud2/ico-reddit.png" alt="Reddit"></a>
                                    <a href="http://www.facebook.com/sharer.php?u=http://masterpoppy.inspi.me/archives/1005&amp;t=LSL-Web+App%26%238230%3BHTML%E3%81%A7HUD%E3%82%92%E9%96%8B%E7%99%BA%E3%81%99%E3%82%8B%282%2F3%29"
                                      title="Share on Facebook" rel="nofollow" target="_blank"><img src="media-hud2/ico-facebook.png" alt="Facebook"></a>
                                    <a href="http://twitter.com/?status=LSL-Web%20App%E2%80%A6HTML%E3%81%A7HUD%E3%82%92%E9%96%8B%E7%99%BA%E3%81%99%E3%82%8B(2/3)%20-%20http://masterpoppy.inspi.me/archives/1005"
                                      title="Share on Twitter" rel="nofollow" target="_blank"><img src="media-hud2/ico-twitter.png" alt="Twitter"></a>
                                    <a href="http://del.icio.us/post?url=http://masterpoppy.inspi.me/archives/1005&amp;title=LSL-Web+App%26%238230%3BHTML%E3%81%A7HUD%E3%82%92%E9%96%8B%E7%99%BA%E3%81%99%E3%82%8B%282%2F3%29"
                                      title="Share on Delicious" rel="nofollow" target="_blank"><img src="media-hud2/ico-del.png" alt="Delicious"></a>
                                  </div>
                                  <div class="clear"></div>
                                </div>
                                <div class="clear"></div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                    </div>
                    <div class="clear"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="clear"></div>
        </div>
      </div>
    </div>

  </div>
  <script type="text/javascript" src="media-hud2/superfish.js"></script>
  <script type="text/javascript" src="media-hud2/jquery.bgiframe.min.js"></script>
  <script type="text/javascript" src="media-hud2/form.js"></script>
  <script type="text/javascript" src="media-hud2/shCore.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushAS3.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushBash.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushColdFusion.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushClojure.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushCpp.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushCSharp.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushCss.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushDelphi.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushDiff.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushErlang.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushFSharp.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushGroovy.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushJava.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushJavaFX.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushJScript.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushLatex.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushMatlabKey.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushObjC.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushPerl.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushPhp.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushPlain.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushPowerShell.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushPython.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushR.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushRuby.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushScala.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushSql.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushVb.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushXml.js"></script>
  <script type="text/javascript" src="media-hud2/shBrushLsl.js"></script>
  <script type="text/javascript">
    /*<![CDATA[*/
    (function() {
      var corecss = document.createElement('link');
      var themecss = document.createElement('link');
      var corecssurl = "https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
      if (corecss.setAttribute) {
        corecss.setAttribute("rel", "stylesheet");
        corecss.setAttribute("type", "text/css");
        corecss.setAttribute("href", corecssurl);
      } else {
        corecss.rel = "stylesheet";
        corecss.href = corecssurl;
      }
      document.getElementsByTagName("head")[0].insertBefore(corecss, document.getElementById("syntaxhighlighteranchor"));
      var themecssurl = "https://web.archive.org/web/20171014222456/http://masterpoppy.inspi.me/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";
      if (themecss.setAttribute) {
        themecss.setAttribute("rel", "stylesheet");
        themecss.setAttribute("type", "text/css");
        themecss.setAttribute("href", themecssurl);
      } else {
        themecss.rel = "stylesheet";
        themecss.href = themecssurl;
      }
      document.getElementsByTagName("head")[0].insertBefore(themecss, document.getElementById("syntaxhighlighteranchor"));
    })();
    SyntaxHighlighter.config.strings.expandSource = 'ソースを表示';
    SyntaxHighlighter.config.strings.help = 'SyntaxHighlighterについて';
    SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
    SyntaxHighlighter.config.strings.noBrush = '指定のブラシが見つかりませんでした: ';
    SyntaxHighlighter.config.strings.brushNotHtmlScript = 'HTMLスクリプトのオプションのためにブラシが構成されませんでした: ';
    SyntaxHighlighter.defaults['pad-line-numbers'] = false;
    SyntaxHighlighter.all(); /*]]>*/
  </script>
  <script type="text/javascript" src="media-hud2/f4b8576cffaf1a3a35e845daf5984953-compressor-part.js"></script>

</body>

</html>
